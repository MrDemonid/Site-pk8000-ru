<!-- fragments/soft-list-edit.html -->
<div th:fragment="softListEdit(softList, categories)">
    <form id="soft-list-form">

        <!-- Заголовок -->
        <div class="soft-header">
            <div class="col name">Название</div>
            <div class="col category">Категория</div>
            <div class="col short-desc">Краткое описание</div>
            <div class="col archives">Файлы</div>
            <div class="col actions">Действия</div>
        </div>

        <!-- Список элементов -->
        <div th:each="soft, iterStat : ${softList}" class="soft-item-inline" th:data-id="${soft.id}">
            <input type="text" th:name="'softList[' + ${iterStat.index} + '].name'"
                   th:value="${soft.name}" placeholder="Название" class="soft-field name"/>

            <select th:name="'softList[' + ${iterStat.index} + '].category'" class="soft-field category">
                <option th:each="cat : ${categories}"
                        th:value="${menu.getCategoryId(cat)}"
                        th:text="${cat.displayName}"
                        th:selected="${menu.getCategoryId(cat) == soft.category}">
                </option>
            </select>

            <input type="text" th:name="'softList[' + ${iterStat.index} + '].shortDescription'"
                   th:value="${soft.shortDescription}" placeholder="Краткое описание" class="soft-field short-desc"/>

            <div class="soft-buttons archives">
                <button type="button" class="add-image" data-action="add-image"  th:data-index="${iterStat.index}" title="Изображения">
                    <img src="/menu/icons/gallery.png" alt="images"/>
                </button>
                <button type="button" class="add-archive" data-action="add-archive"  th:data-index="${iterStat.index}" title="Архивы">
                    <img src="/menu/icons/archive.png" alt="archive"/>
                </button>
                <button type="button" class="add-description" data-action="add-description" th:data-index="${iterStat.index}" title="Описание">
                    <img src="/menu/icons/description.png" alt="description"/>
                </button>
            </div>

            <div class="soft-buttons actions">
                <button type="button" class="save-soft" data-action="save-soft" th:data-index="${iterStat.index}" title="Сохранить">
                    <img src="/menu/icons/save.png" alt="save"/>
                </button>
                <button type="button" class="delete-soft" data-action="delete-soft" th:data-index="${iterStat.index}" title="Удалить">
                    <img src="/menu/icons/delete.png" alt="delete"/>
                </button>
            </div>
        </div>
    </form>

    <!-- пагинация -->
    <div class="pagination-container">
        <div th:replace="~{fragments/pagination :: pageSizeSelector(pageData=${pageData})}"></div>
        <th:block th:if="${pageData.totalPages > 1}">
            <div th:replace="~{fragments/pagination :: paginationControls(pageData=${pageData}, pageButtons=${pageButtons})}"></div>
        </th:block>
    </div>


    <!-- Модальное окно для управления изображениями -->
    <div id="softimg-modal" class="softimg-modal" style="display: none;">
        <div class="softimg-modal-content">
            <span class="softimg-modal-close">&times;</span>
            <h2>Управление изображениями</h2>
            <div id="softimg-container" class="softimg-grid"></div>
        </div>
    </div>


    <!-- Модальное окно для управления архивами -->
    <div id="softfile-modal" class="softfile-modal" style="display: none;">
        <div class="softfile-modal-content">
            <span class="softfile-modal-close">&times;</span>
            <h2>Управление файлами</h2>
            <!-- Контейнер для списка файлов -->
            <div id="softfile-container" class="softfile-list"></div>

            <!-- Кнопка для добавления нового файла -->
            <div class="softfile-add">
                <button type="button" id="softfile-add-btn" title="Добавить файл">
                    <img src="/menu/icons/add-file.png" alt="add"/>
                    <span>Добавить файл</span>
                </button>
            </div>
        </div>
    </div>


    <!-- Модальное окно для управления описанием -->
    <div id="softdesc-modal" class="softdesc-modal" style="display: none;">
        <div class="softdesc-modal-content">
            <span class="softdesc-modal-close">&times;</span>

            <!-- Заголовок -->
            <h2 id="softdesc-title">Описание продукта</h2>

            <!-- Список аттачей -->
            <h3>Используемые файлы</h3>
            <div class="softdesc-attachments-wrapper">
                <div id="softdesc-attachments" class="softdesc-attachments">
                    <!-- элементы списка -->
                </div>

                <!-- Кнопки под списком -->
                <!-- Кнопки под списком -->
                <div class="softdesc-attach-controls">
                    <button type="button" id="softdesc-attach-add-file" title="Добавить файл">
                        <img src="/menu/icons/add-file.png" alt="add-file">
                        <span>Добавить файл</span>
                    </button>
                    <button type="button" id="softdesc-attach-add-folder" title="Добавить папку">
                        <img src="/menu/icons/folder.png" alt="add-folder">
                        <span>Добавить папку</span>
                    </button>
                    <button type="button" id="softdesc-attach-clear" title="Очистить список">
                        <img src="/menu/icons/clear.png" alt="clear">
                        <span>Очистить</span>
                    </button>
                </div>
            </div>

            <!-- Нижняя панель -->
            <div class="softdesc-footer">
                <button type="button" id="softdesc-apply-btn" class="softdesc-apply-btn">
                    <img src="/menu/icons/save.png" alt="apply">
                    <span>Сохранить изменения</span>
                </button>
                <button type="button" id="softdesc-download-btn" class="softdesc-download-btn">
                    <img src="/menu/icons/download.png" alt="download">
                    <span>Скачать</span>
                </button>
                <button type="button" id="softdesc-delete-btn" class="softdesc-delete-btn">
                    <img src="/menu/icons/delete.png" alt="download">
                    <span>Удалить описание</span>
                </button>
            </div>
        </div>
    </div>

</div>

