<!-- soft-list.html -->
<div th:fragment="softListFragment(softList)">

    <link rel="stylesheet" th:href="@{/css/soft-list-view.css}">
    <script th:src="@{/js/soft-list-view.js}" defer></script>

    <!-- Контент софта -->
    <main class="content-product">
        <div class="product-grid">
            <div th:each="soft : ${softList}" class="product-item" th:data-name="${soft.name}">

                <!-- Название -->
                <div class="product-title" th:text="${soft.name}">Soft Name</div>

                <!-- Изображения -->
                <div class="product-image-container"
                     th:if="${soft.imageUrls != null and !soft.imageUrls.isEmpty()}">
                    <div class="image-wrapper">
                        <img th:each="imgUrl, iterStat : ${soft.imageUrls}"
                             th:src="@{${imgUrl}}"
                             class="product-image"
                             th:classappend="${iterStat.index != 0} ? ' hidden' : ''"
                             alt="Soft image" />
                    </div>
                </div>

                <!-- Краткое описание -->
                <div class="product-description"
                     th:text="${soft.shortDescription ?: 'Описание отсутствует'}">
                    Краткое описание...
                </div>

                <!-- Список архивов -->
                <div class="product-price"
                     th:if="${soft.archiveUrls != null and !soft.archiveUrls.isEmpty()}">
                    <div class="archive-list">
                        <div th:each="url, iterStat : ${soft.archiveUrls}">
                            <a th:href="@{${url}}"
                               th:text="'Скачать архив ' + ${iterStat.index + 1}">Скачать архив</a>
                        </div>
                    </div>
                </div>

            </div> <!-- /product-item -->
        </div> <!-- /product-grid -->
    </main>

    <!-- пагинация -->
    <div class="pagination-container">
        <div th:replace="~{fragments/pagination :: pageSizeSelector(pageData=${pageData})}"></div>
        <th:block th:if="${pageData.totalPages > 1}">
            <div th:replace="~{fragments/pagination :: paginationControls(pageData=${pageData}, pageButtons=${pageButtons})}"></div>
        </th:block>
    </div>

</div>
